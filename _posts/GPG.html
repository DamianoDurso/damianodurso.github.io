<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Gender Pay Gap Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="GPG_files/libs/clipboard/clipboard.min.js"></script>
<script src="GPG_files/libs/quarto-html/quarto.js"></script>
<script src="GPG_files/libs/quarto-html/popper.min.js"></script>
<script src="GPG_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="GPG_files/libs/quarto-html/anchor.min.js"></script>
<link href="GPG_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="GPG_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="GPG_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="GPG_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="GPG_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Gender Pay Gap Methods</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="general-background" class="level2">
<h2 class="anchored" data-anchor-id="general-background">General background</h2>
<ul>
<li>Gender Pay Gap calculation is a crucial requirements for most companies, given new laws.</li>
</ul>
</section>
<section id="what-is-commonly-reported" class="level2">
<h2 class="anchored" data-anchor-id="what-is-commonly-reported">What is commonly reported</h2>
<ul>
<li>Normally companies are interested in reporting:
<ul>
<li>Unadjusted GPG</li>
<li>Adjusted GPG</li>
</ul></li>
</ul>
<p>There is consensus around UGPG but not around AGPG</p>
</section>
<section id="issues-with-modeling-adjusted-gender-pay-gap" class="level2">
<h2 class="anchored" data-anchor-id="issues-with-modeling-adjusted-gender-pay-gap">Issues with modeling adjusted gender pay gap</h2>
<ul>
<li>Comparability (what goes in the model)</li>
<li>Modeling (what methodologies)</li>
<li>Reporting (estimates vs uncertainties)</li>
</ul>
</section>
<section id="methodologies-described" class="level2">
<h2 class="anchored" data-anchor-id="methodologies-described">Methodologies described</h2>
<ul>
<li>Oaxaca Blinder</li>
<li>IPW</li>
<li>Matching</li>
</ul>
<p>#First do some basic descriptives #then, introduce the standard approach #then, introduce the issue of matching by ipw #finally, introduce matching by matching options and marginal effects</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">"Glassdoor Gender Pay Gap.csv"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             JobTitle Gender Age PerfEval Education           Dept Seniority
1    Graphic Designer Female  18        5   College     Operations         2
2   Software Engineer   Male  21        5   College     Management         5
3 Warehouse Associate Female  19        4       PhD Administration         5
4   Software Engineer   Male  20        5   Masters          Sales         4
5    Graphic Designer   Male  26        5   Masters    Engineering         5
6                  IT Female  20        5       PhD     Operations         4
  BasePay Bonus
1   42363  9938
2  108476 11128
3   90208  9268
4  108080 10154
5   99464  9319
6   70890 10126</code></pre>
</div>
</div>
</section>
<section id="data-exploration" class="level1">
<h1>Data Exploration</h1>
<p>Next we are just going to look at some basic descriptives for some of the variables by gender.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="GPG_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<p>What we can observe is that there seems to be some difference in terms of Age, performance evaluation, seniority and education.</p>
</section>
<section id="unadjusted-pay-gap" class="level1">
<h1>Unadjusted Pay Gap</h1>
<p>The first step in analyzing the GPG would be the average difference in pay between man and women, also called the Unadjusted Gender Pay gap. In our case we will be following the EU directive on this metric https://ec.europa.eu/eurostat/cache/metadata/en/earn_grgpg2_esms.htm#:~:text=according%20to%20the%20following%20definition,paid%20employees%5D%20expressed%20in%20%25. which is GPG = [(average gross hourly earnings of male paid employees - average gross hourly earnings of female paid employees) / average gross hourly earnings of male paid employees] expressed in %</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>avg_pay_men <span class="ot">=</span> <span class="fu">mean</span>(df[df[<span class="st">'Gender'</span>] <span class="sc">==</span> <span class="st">'Male'</span>, <span class="st">'BasePay'</span>])</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>avg_pay_women <span class="ot">=</span> <span class="fu">mean</span>(df[df[<span class="st">'Gender'</span>] <span class="sc">==</span> <span class="st">'Female'</span>, <span class="st">'BasePay'</span>])</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>GPG <span class="ot">=</span> <span class="fu">round</span>(((avg_pay_men<span class="sc">-</span>avg_pay_women)<span class="sc">/</span>avg_pay_men)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"The Unadjusted Gender Pay Gap is = "</span>, <span class="sc">-</span><span class="dv">1</span><span class="sc">*</span>GPG, <span class="st">"%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The Unadjusted Gender Pay Gap is = -8.65%"</code></pre>
</div>
</div>
<p>The resulting gender pay gap is -8.65%, indicating that women, on average, earn 8.65% less than men.</p>
</section>
<section id="adjusted-gpg" class="level1">
<h1>Adjusted GPG</h1>
<section id="oaxaca-blinder" class="level2">
<h2 class="anchored" data-anchor-id="oaxaca-blinder">Oaxaca Blinder</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(oaxaca)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>df_clean<span class="sc">$</span>BasePay_log <span class="ot">=</span> <span class="fu">log</span>(df_clean<span class="sc">$</span>BasePay)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>df_clean<span class="sc">$</span>Gender_fac <span class="ot">=</span> <span class="fu">ifelse</span>(df_clean<span class="sc">$</span>Gender <span class="sc">==</span> <span class="st">"Male"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>oaxaca.results <span class="ot">=</span> <span class="fu">oaxaca</span>(BasePay_log <span class="sc">~</span> Age <span class="sc">+</span> PerfEval <span class="sc">+</span> Education <span class="sc">+</span> Seniority <span class="sc">+</span> Dept <span class="sc">+</span> JobTitle <span class="sc">|</span> Gender_fac, <span class="at">data =</span> df_clean)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>AGPG <span class="ot">=</span> <span class="fu">round</span>(((oaxaca.results<span class="sc">$</span>y<span class="sc">$</span>y.A <span class="sc">-</span> oaxaca.results<span class="sc">$</span>y<span class="sc">$</span>y.B)<span class="sc">/</span>oaxaca.results<span class="sc">$</span>y<span class="sc">$</span>y.A)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"The AGPG estimated through Oaxaca-Blinder = "</span>, <span class="sc">-</span><span class="dv">1</span><span class="sc">*</span>AGPG, <span class="st">"%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The AGPG estimated through Oaxaca-Blinder = -0.83%"</code></pre>
</div>
</div>
</section>
<section id="ipw" class="level2">
<h2 class="anchored" data-anchor-id="ipw">IPW</h2>
<p>Limitation Oaxaca https://www.iza.org/publications/dp/981/matching-as-a-tool-to-decompose-wage-g</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>formula_ipw <span class="ot">=</span> <span class="st">'Gender_fac ~ Age + PerfEval + Education + Seniority + Dept + JobTitle'</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>weights_ipw <span class="ot">=</span> <span class="fu">glm</span>(formula_ipw,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">'probit'</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">data =</span> df_clean)    </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#calculate ipw weights</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>ipw_w <span class="ot">=</span> <span class="fu">predict</span>(weights_ipw, df_clean, <span class="at">type =</span><span class="st">'response'</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>outcome <span class="ot">=</span> df_clean<span class="sc">$</span>Gender_fac</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>df_clean<span class="sc">$</span>ipw_wts <span class="ot">=</span> (outcome<span class="sc">/</span>ipw_w) <span class="sc">+</span> ((<span class="dv">1</span><span class="sc">-</span>outcome)<span class="sc">/</span> (<span class="dv">1</span><span class="sc">-</span>ipw_w)) </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># fit with ipw weights</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>formula_lm <span class="ot">=</span> <span class="st">'BasePay_log ~ Gender_fac'</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">=</span> <span class="fu">lm</span>(formula_lm, <span class="at">data =</span> df_clean, <span class="at">weights=</span> ipw_wts)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marginaleffects)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>comp <span class="ot">=</span> <span class="fu">avg_comparisons</span>(mod, </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>                       <span class="at">variables =</span> <span class="st">'Gender_fac'</span>, </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>                       <span class="at">vcov =</span><span class="sc">~</span>subclass, </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                       <span class="at">newdata =</span> <span class="fu">subset</span>(df_clean, Gender_fac <span class="sc">==</span><span class="dv">1</span>), </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                       <span class="at">wts =</span> <span class="st">'ipw_wts'</span>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>AGPG_ipw <span class="ot">=</span> <span class="fu">round</span>((<span class="fu">exp</span>(comp[<span class="st">'estimate'</span>])<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>)</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"The AGPG estimated by IPW is = "</span>, AGPG_ipw, <span class="st">"%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The AGPG estimated by IPW is = -2.51%"</code></pre>
</div>
</div>
</section>
<section id="matching" class="level2">
<h2 class="anchored" data-anchor-id="matching">Matching</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MatchIt)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>match <span class="ot">=</span> <span class="fu">matchit</span>(<span class="fu">as.formula</span>(formula_ipw), <span class="at">method =</span> <span class="st">'cem'</span>, <span class="at">data =</span> df_clean)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking balance after cem matching</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(match, <span class="at">un =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
matchit(formula = as.formula(formula_ipw), data = df_clean, method = "cem")

Summary of Balance for Matched Data:
                            Means Treated Means Control Std. Mean Diff.
Age                                 40.50         41.75         -0.0906
PerfEval                             3.00          3.00          0.0000
EducationCollege                     0.25          0.25          0.0000
EducationHigh School                 0.50          0.50          0.0000
EducationMasters                     0.25          0.25          0.0000
EducationPhD                         0.00          0.00          0.0000
Seniority                            3.00          3.00          0.0000
DeptAdministration                   0.25          0.25          0.0000
DeptEngineering                      0.50          0.50          0.0000
DeptManagement                       0.00          0.00          0.0000
DeptOperations                       0.25          0.25          0.0000
DeptSales                            0.00          0.00          0.0000
JobTitleData Scientist               0.25          0.25          0.0000
JobTitleDriver                       0.25          0.25          0.0000
JobTitleFinancial Analyst            0.00          0.00          0.0000
JobTitleGraphic Designer             0.25          0.25          0.0000
JobTitleIT                           0.00          0.00          0.0000
JobTitleManager                      0.00          0.00          0.0000
JobTitleMarketing Associate          0.00          0.00          0.0000
JobTitleSales Associate              0.25          0.25          0.0000
JobTitleSoftware Engineer            0.00          0.00          0.0000
JobTitleWarehouse Associate          0.00          0.00          0.0000
                            Var. Ratio eCDF Mean eCDF Max Std. Pair Dist.
Age                             0.8887     0.026     0.25          0.0906
PerfEval                        1.0000     0.000     0.00          0.0000
EducationCollege                     .     0.000     0.00          0.0000
EducationHigh School                 .     0.000     0.00          0.0000
EducationMasters                     .     0.000     0.00          0.0000
EducationPhD                         .     0.000     0.00          0.0000
Seniority                       1.0000     0.000     0.00          0.0000
DeptAdministration                   .     0.000     0.00          0.0000
DeptEngineering                      .     0.000     0.00          0.0000
DeptManagement                       .     0.000     0.00          0.0000
DeptOperations                       .     0.000     0.00          0.0000
DeptSales                            .     0.000     0.00          0.0000
JobTitleData Scientist               .     0.000     0.00          0.0000
JobTitleDriver                       .     0.000     0.00          0.0000
JobTitleFinancial Analyst            .     0.000     0.00          0.0000
JobTitleGraphic Designer             .     0.000     0.00          0.0000
JobTitleIT                           .     0.000     0.00          0.0000
JobTitleManager                      .     0.000     0.00          0.0000
JobTitleMarketing Associate          .     0.000     0.00          0.0000
JobTitleSales Associate              .     0.000     0.00          0.0000
JobTitleSoftware Engineer            .     0.000     0.00          0.0000
JobTitleWarehouse Associate          .     0.000     0.00          0.0000

Sample Sizes:
          Control Treated
All           532     468
Matched         4       4
Unmatched     528     464
Discarded       0       0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df_out <span class="ot">=</span> <span class="fu">match.data</span>(match)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># fit with ipw weights</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>formula_lm <span class="ot">=</span> <span class="st">'BasePay_log ~ Gender_fac'</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">=</span> <span class="fu">lm</span>(formula_lm, <span class="at">data =</span> df_out, <span class="at">weights=</span> weights)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>comp <span class="ot">=</span> <span class="fu">avg_comparisons</span>(mod, </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">variables =</span> <span class="st">'Gender_fac'</span>, </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">vcov =</span><span class="sc">~</span>subclass, </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                       <span class="at">newdata =</span> <span class="fu">subset</span>(df_out, Gender_fac <span class="sc">==</span><span class="dv">1</span>), </span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                       <span class="at">wts =</span> <span class="st">'weights'</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>AGPG_match <span class="ot">=</span> <span class="fu">round</span>((<span class="fu">exp</span>(comp[<span class="st">'estimate'</span>])<span class="sc">-</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"The AGPG estimated by cem matching is = "</span>, AGPG_match, <span class="st">"%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The AGPG estimated by cem matching is = -2.15%"</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>